Shrink: Scales deviations from the local mean by a factor in (0,1), producing attenuated versions of the original windows. This increases robustness to amplitude variability and measurement gain changes.

Objective: Augment data by shrinking variations within the window (shrink), generating smoother versions of the patterns.

```{r}
# Time series augmentation - shrink

# Installing the package (if needed)
#install.packages("tspredit")
```

```{r}
# Loading the packages
library(daltoolbox)
library(tspredit) 
```


```{r}
# Series for study

data(tsd)
library(ggplot2)
plot_ts(x=tsd$x, y=tsd$y) + theme(text = element_text(size=16))
```

```{r}
# Sliding windows

sw_size <- 10
xw <- ts_data(tsd$y, sw_size)
```

```{r}
# Augmentation (shrink)

augment <- ts_aug_shrink()
augment <- fit(augment, xw)
xa <- transform(augment, xw)
idx <- attr(xa, "idx")
ts_head(xa)
```

```{r}
# Plot (original vs augmented windows)

i <- 1:nrow(xw)
y <- xw[,sw_size]
plot(x = i, y = y, main = "cosine")
lines(x = i, y = y, col="black")
for (j in 1:nrow(xa)) {
  lines(x = (idx[j]-sw_size+1):idx[j], y = xa[j,1:sw_size], col="green")
}
```

References
- H. I. Fawaz, G. Forestier, J. Weber, L. Idoumghar, and P.-A. Muller (2019). Deep learning for time series classification: A review. Data Mining and Knowledge Discovery, 33, 917â€“963.
