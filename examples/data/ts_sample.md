Objective: Split a ts_data into training and test sets while preserving time order, defining the test size, and visualizing the parts.


``` r
#install.packages("tspredit")

# Loading the package
library(tspredit) 
```


``` r
# Series for study

data(tsd)
```


``` r
library(ggplot2)
plot_ts(x = tsd$x, y = tsd$y) + theme(text = element_text(size=16))
```

![plot of chunk unnamed-chunk-3](fig/ts_sample/unnamed-chunk-3-1.png)


``` r
# Sliding windows

sw_size <- 10
ts <- ts_data(tsd$y, sw_size)
ts_head(ts, 3)
```

```
##             t9        t8        t7        t6        t5        t4
## [1,] 0.0000000 0.2474040 0.4794255 0.6816388 0.8414710 0.9489846
## [2,] 0.2474040 0.4794255 0.6816388 0.8414710 0.9489846 0.9974950
## [3,] 0.4794255 0.6816388 0.8414710 0.9489846 0.9974950 0.9839859
##             t3        t2        t1        t0
## [1,] 0.9974950 0.9839859 0.9092974 0.7780732
## [2,] 0.9839859 0.9092974 0.7780732 0.5984721
## [3,] 0.9092974 0.7780732 0.5984721 0.3816610
```


``` r
# Sampling (train and test)

test_size <- 3
samp <- ts_sample(ts, test_size)
```


``` r
# First five rows of the train set
ts_head(samp$train, 5)
```

```
##             t9        t8        t7        t6        t5        t4
## [1,] 0.0000000 0.2474040 0.4794255 0.6816388 0.8414710 0.9489846
## [2,] 0.2474040 0.4794255 0.6816388 0.8414710 0.9489846 0.9974950
## [3,] 0.4794255 0.6816388 0.8414710 0.9489846 0.9974950 0.9839859
## [4,] 0.6816388 0.8414710 0.9489846 0.9974950 0.9839859 0.9092974
## [5,] 0.8414710 0.9489846 0.9974950 0.9839859 0.9092974 0.7780732
##             t3        t2        t1         t0
## [1,] 0.9974950 0.9839859 0.9092974  0.7780732
## [2,] 0.9839859 0.9092974 0.7780732  0.5984721
## [3,] 0.9092974 0.7780732 0.5984721  0.3816610
## [4,] 0.7780732 0.5984721 0.3816610  0.1411200
## [5,] 0.5984721 0.3816610 0.1411200 -0.1081951
```


``` r
# Last five rows of the train set
ts_head(samp$train[-c(1:(nrow(samp$train)-5)),])
```

```
##               t9          t8        t7        t6        t5
## [1,] -0.27941550 -0.03317922 0.2151200 0.4500441 0.6569866
## [2,] -0.03317922  0.21511999 0.4500441 0.6569866 0.8230809
## [3,]  0.21511999  0.45004407 0.6569866 0.8230809 0.9380000
## [4,]  0.45004407  0.65698660 0.8230809 0.9380000 0.9945988
## [5,]  0.65698660  0.82308088 0.9380000 0.9945988 0.9893582
##             t4        t3        t2        t1        t0
## [1,] 0.8230809 0.9380000 0.9945988 0.9893582 0.9226042
## [2,] 0.9380000 0.9945988 0.9893582 0.9226042 0.7984871
## [3,] 0.9945988 0.9893582 0.9226042 0.7984871 0.6247240
## [4,] 0.9893582 0.9226042 0.7984871 0.6247240 0.4121185
## [5,] 0.9226042 0.7984871 0.6247240 0.4121185 0.1738895
```


``` r
# Test data
ts_head(samp$test)
```

```
##             t9        t8        t7        t6        t5        t4
## [1,] 0.8230809 0.9380000 0.9945988 0.9893582 0.9226042 0.7984871
## [2,] 0.9380000 0.9945988 0.9893582 0.9226042 0.7984871 0.6247240
## [3,] 0.9945988 0.9893582 0.9226042 0.7984871 0.6247240 0.4121185
##             t3          t2          t1          t0
## [1,] 0.6247240  0.41211849  0.17388949 -0.07515112
## [2,] 0.4121185  0.17388949 -0.07515112 -0.31951919
## [3,] 0.1738895 -0.07515112 -0.31951919 -0.54402111
```

